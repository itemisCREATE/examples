<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>[Pro] Coffee Machine with C integration</title>
<link href="../css/style.css" rel="stylesheet">
</head>
<body class="body-container">
  <div class="primary">

    <h1>YAKINDU Coffee Machine pro example</h1>
    <p class="pro-feature">
      This is a comprehensive example for the deep integration of YAKINDU
      statecharts with manually written C code. The example is implemented as a
      simple command line tool. It makes use of POSIX threads. So you need a
      compiler tool chain and a 'pthread' library to build an run the example.
      The underlying statechart for the coffee machine looks as follows: <img
        alt="The digital watch statechart in all its details"
        src="images/CoffeeMachine_model.png" /> The statechart consists of two
      major states "ON" and "OFF". The "ON" state is a composite state with
      several substates and substate machines for the different modes.
    </p>
    <h2>Manually written source code</h2>
    <p>The source code artifacts are all located in the 'src' folder. File
      names that include 'coffee' or 'cm_' include application specific
      implementations and those with 'sc_' prefix are generic parts that belong
      to the state machine infrastructure.</p>
    <h2>Set up your system</h2>
    <p>As mentioned above you need a compiler tool chain and the 'pthread'
      libraries. If you have a Linux or Mac OS Xsystem you likely have
      everything installed. If you run Windows than we propose to install cygwin
      tools (https://www.cygwin.com).</p>
    <h2>Set up the roject</h2>
    <p>This project is preconfigured for Windows with cygwin. If you use
      another system:
    <ul>
      <li>right-click on project 'coffee_machine' in the 'Project Explorer'</li>
      <li>choose 'Properties'</li>
      <li>a dialog appears - choose 'C/C++ Build'</li>
      <li>select 'Tool Chain Editor'</li>
      <li>choose the appropriate tool chain for 'current tool chain'</li>
      <li>click 'OK'</li>
    </ul>
    <p>... and your project should be ready to build.</p>
    <h2>Build</h2>
    <p>
    <ul>
      <li>Right-click on project 'coffee_machine' in the 'Project Explorer'</li>
      <li>choose 'Build Project'</li>
    </ul>
    <h2>Run the example</h2>
    <p>In the 'Debug' or 'Release' folder you will find an executable
      'coffee_machine_pro.exe' (even on Linux and Mac OS X). Right-click on this
      and choose:
    <ul>
      <li>'Run As > Local C/C++ Application'.</li>
    </ul>
    <p>
      The embedded Eclipse console shows up and you can follow the instructions.
      Enter 'o' to start the coffee machine... <img class="standard-image"
        src="images/console.png"
        alt="Output of the coffee machine on the console" />
    </p>
    <h2>Simulate</h2>
    <p>Additionally you can simulate the statechart by right-click and
      choose:
    <ul>
      <li>'Run As > Statechart Simulation'</li>
    </ul>
    <p>
      You'll find more information on using the simulation in the <a
        href="https://www.itemis.com/en/yakindu/statechart-tools/documentation/user-guide/">help</a>.
    </p>
    <h2>Change the model</h2>
    <p>
      You may want to change or extend the model. Within the embedded expression
      editor you can press 'Ctrl-Space' to get proposals, which also include the
      C elements from the imported C header files. <img class="standard-image"
        src="images/CodeCompletion.png"
        alt="By pressing CTRL (CMD) +Space you get coding proposals." />
    </p>

    <h2>Generate state machine code</h2>
    <p>If you have changed the model you can generate state machine code by
      right-click on 'CoffeeMachine.sgen' and choose 'Generate Code Artefacts'.
      This will generate:</p>
    <ul>
      <li>CoffeeMachine.h</li>
      <li>CoffeeMachineRequired.h</li>
      <li>CoffeeMachine.c</li>
    </ul>
  </div>
</body>
</html>